---
layout: post
title:  "Новая версия RubyInstaller 2.7.0-1"
author: Lars Kanis
---
Вышла версия 2.7.0-1 установщика Ruby.
Читайте подробнее [пост о релизе ruby-2.7.0](https://www.ruby-lang.org/en/news/2019/12/25/ruby-2-7-0-released/) и [журнал изменений проекта установщика Ruby](https://github.com/oneclick/rubyinstaller2/blob/master/CHANGELOG-2.7.md).
Обратите, пожалуйста, внимание на то, что некоторые гемы еще не совместимы с версией Ruby 2.7 на Windows.
Поэтому советуем вам оставаться на версии 2.6 до тех пор, пока версия 2.7 не начнет полноценно поддерживаться – если только у вас нет желания внести свой вклад в исправление оставшихся ошибок.

Предыдущие версии установщика Ruby 2.5.x и 2.6.x <b>не следует</b> обновлять, устанавливая RubyInstaller-2.7.x в то же хранилище – поскольку гемы с расширениями C несовместимы в версиях Ruby 2.6 и 2.7.
Лучше использовать новое хранилище для 2.7.x, как предлагает установщик.

До сих пор установщик Ruby использовал [rb-readline](https://github.com/ConnorAtherton/rb-readline) в качестве подстрочного редактора для irb и других интерактивных консольных приложений – поскольку библиотека GNU readline плохо работает на Windows.
Однако rb-readline практически не сопровождается, и ее работа осложняется большим количеством багов.  

К счастью, версия Ruby 2.7 содержит [Reline](https://github.com/ruby/reline) – превосходную реализацию Ruby Readline.
Она хорошо работает на Windows, так что RubyInstaller-2.7.0-1 заменяет rb-readline при помощи Reline.

Еще одно изменение состоит в том, что RubyInstaller-2.7.0-1 принимает по умолчанию значение UTF-8 в качестве внешней кодировки.
Исходный код Ruby, инструменты MSYS2 и ядро PowerShell уже принимают по умолчанию UTF-8.
В этом обновлении исправлены также некоторые ошибки, связанные с Reline, а также повышена совместимость с другими операционными системами.
UTF-8 включается, устанавливая переменную среды `RUBYOPT` на `-Eutf-8` .
Таким образом, это затрагивает все версии ruby, установленные на данной системе. 
Чтобы вернуться к классической кодовой странице, зависящей от страны, зайдите в системные настройки Windows и удалите `RUBYOPT` из пользовательской и системной переменных среды.

И дефолт Reline, и дефолт UTF-8 будут бэкпортированы в следующие релизы установщика 2.4, 2.5 и 2.6, если все будет хорошо работать в версии 2.7.
Оставляйте, пожалуйста, положительные и отрицательные отзывы в [баг-трэкере](https://github.com/oneclick/rubyinstaller2/issues)!

Все двоичные данные доступны в [разделе загрузок]({{ "/downloads/" | relative_url }})!
